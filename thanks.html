<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Thank you for contacting CodeFoxSoft! Your message has been received and we'll respond shortly. Get in touch for game development, app development, or web design services.">
    <meta name="keywords"
        content="CodeFoxSoft, Indie Game Developer, Web Developer, App Development, AI Solutions, Nicholas Larkin Buchanan, Codefox soft">
        content="thank you, contact confirmation, CodeFoxSoft contact, message received, contact form, thank you page, contact CodeFoxSoft, message sent, contact confirmation page, CodeFoxSoft contact form">
    <meta name="author" content="Nicholas Thorne Larkin Buchanan">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">


    <!-- Open Graph Meta Tags (Facebook, Nextdoor, LinkedIn, etc.) -->
    <meta property="og:title" content="Thank You for Contacting CodeFoxSoft">
    <meta property="og:description"
        content="Thank you for contacting CodeFoxSoft! Your message has been received and we'll respond shortly. Get in touch for game development, app development, or web design services.">
    <meta property="og:image" content="https://www.codefoxsoft.com/appsgamessites.png">
    <meta property="og:url" content="https://www.codefoxsoft.com/thanks.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="CodeFoxSoft">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Thank You for Contacting CodeFoxSoft">
    <meta name="twitter:description"
        content="Thank you for contacting CodeFoxSoft! Your message has been received and we'll respond shortly. Get in touch for game development, app development, or web design services.">
    <meta name="twitter:image" content="https://www.codefoxsoft.com/appsgamessites.png">

    <title>Thank You - CodeFoxSoft</title>
    <link rel="canonical" href="https://www.codefoxsoft.com/thanks.html">
    <link rel="icon" type="image/png" sizes="48x48" href="logo.png">


    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* General body styles, no background image here anymore */
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background-color: #0c0d11;
            /* A very dark, almost black, background */
        }

        /* Hero Section Container for the Three.js canvas */
        #hero-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            /* Behind other content */
        }

        /* The three.js canvas inside the container */
        #hero-background canvas {
            width: 100% !important;
            height: 100% !important;
            display: block;
            /* Remove default spacing below the canvas */
        }

        /* Hero Content Box - Base styles for desktop */
        .hero-content-box {
            background-color: rgba(17, 24, 39, 0.5);
            /* 50% opacity for desktop */
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
        }

        /* Hero Box Mobile Optimization - More transparent with backdrop blur */
        @media (max-width: 768px) {
            .hero-content-box {
                /* Remove backdrop-filter on mobile for better compatibility */
                background-color: rgba(17, 24, 39, 0.1) !important;
                /* Even more transparent - 10% opacity */
                backdrop-filter: none !important;
                /* Disable backdrop-filter on mobile */
                -webkit-backdrop-filter: none !important;
            }

            .hero-content-box h1,
            .hero-content-box p {
                /* Reduce text-shadow intensity for better transparency visibility */
                text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.5), 0 0 8px rgba(0, 0, 0, 0.3);
            }
        }

        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a202c;
            /* Dark background */
        }

        ::-webkit-scrollbar-thumb {
            background: #4a5568;
            /* Gray thumb */
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
            /* Lighter gray on hover */
        }

        /* Mobile Menu Animation */
        #mobile-menu {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            display: block !important;
        }

        #mobile-menu.hidden {
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none;
        }

        #mobile-menu:not(.hidden) {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "CodeFoxSoft",
      "url": "https://www.codefoxsoft.com",
      "logo": "https://www.codefoxsoft.com/logo.png",
      "sameAs": [
        "https://github.com/nbuchanan94",
        "https://linkedin.com/in/nbuchanan94",
        "https://youtube.com/@codefoxsoft",
        "https://play.google.com/store/apps/dev?id=8226089087465940870"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "email": "nbuchanan94@gmail.com",
        "telephone": "+1-240-776-2408",
        "contactType": "Customer Support"
      },
      "founder": {
        "@type": "Person",
        "name": "Nicholas Larkin Buchanan",
        "url": "https://www.codefoxsoft.com/about"
      }
    }
    </script>
</head>

<body class="text-gray-100">

    <!-- The container for the Three.js animated background -->
    <div id="hero-background"></div>

    <!-- Header -->
    <header class="bg-gray-800 bg-opacity-80 backdrop-blur-sm shadow-lg fixed w-full z-50 py-4">
        <nav class="container mx-auto flex justify-between items-center px-6">
            <a href="index.html" class="text-3xl font-bold text-green-500 flex items-center">
                <!-- Logo -->
                <img src="logo.png"
                    onerror="this.onerror=null;this.src='https://placehold.co/48x48/0d9488/ffffff?text=CFS';"
                    alt="CodeFoxSoft™ Logo" class="h-12 w-12 rounded-full mr-3">
                <span class="hidden md:block">CodeFoxSoft™</span>
                <span class="block md:hidden">CodeFoxSoft™</span>
            </a>

            <!-- Desktop Navigation Links (visible on md screens and up) -->
            <ul class="hidden md:flex space-x-6 text-lg">
                <li><a href="index.html#about" class="hover:text-green-400 transition-colors duration-300">About</a>
                </li>
                <li><a href="index.html#projects"
                        class="hover:text-green-400 transition-colors duration-300">Projects</a></li>
                <li><a href="alldownload.html" class="hover:text-green-400 transition-colors duration-300">Downloads</a>
                </li>
                <li><a href="blog.html" class="hover:text-green-400 transition-colors duration-300">Blog</a></li>
                <li><a href="index.html#contact" class="hover:text-green-400 transition-colors duration-300">Contact</a>
                </li>
            </ul>

            <!-- Mobile Hamburger Menu Button (visible on md screens and down) -->
            <button id="menu-button"
                class="md:hidden text-gray-100 hover:text-green-400 focus:outline-none transition-colors duration-300">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7">
                    </path>
                </svg>
            </button>
        </nav>
    </header>

    <!-- Mobile Menu (initially hidden, will be shown/hidden by JS) -->
    <div id="mobile-menu"
        class="md:hidden fixed top-20 left-0 w-full bg-gray-800 bg-opacity-95 backdrop-blur-sm shadow-lg z-40 hidden rounded-b-lg">
        <ul class="flex flex-col text-center py-4 space-y-4 text-lg">
            <li><a href="index.html#about"
                    class="block py-2 text-gray-200 hover:text-green-400 hover:bg-gray-700 rounded-lg transition-colors duration-300">About</a>
            </li>
            <li><a href="index.html#projects"
                    class="block py-2 text-gray-200 hover:text-green-400 hover:bg-gray-700 rounded-lg transition-colors duration-300">Projects</a>
            </li>
            <li><a href="alldownload.html"
                    class="block py-2 text-gray-200 hover:text-green-400 hover:bg-gray-700 rounded-lg transition-colors duration-300">Downloads</a>
            </li>
            <li><a href="blog.html"
                    class="block py-2 text-gray-200 hover:text-green-400 hover:bg-gray-700 rounded-lg transition-colors duration-300">Blog</a>
            </li>
            <li><a href="index.html#contact"
                    class="block py-2 text-gray-200 hover:text-green-400 hover:bg-gray-700 rounded-lg transition-colors duration-300">Contact</a>
            </li>
        </ul>
    </div>

    <!-- Main Content Area -->
    <section class="py-20 pt-32 min-h-screen flex items-center justify-center z-10 relative">
        <div class="container mx-auto px-6 max-w-2xl text-center">
            <div class="hero-content-box relative z-10 p-12 rounded-xl shadow-lg">
                <h1 class="text-4xl md:text-6xl font-extrabold text-green-400 mb-6 break-words">Thank You!</h1>
                <p class="text-gray-300 text-lg mb-8 leading-relaxed">
                    Your message has been launched into the cosmos and we've successfully intercepted it. We'll be
                    reviewing your inquiry and will send a transmission back to you shortly.
                </p>
                <div class="animate-bounce mb-6 text-green-400">
                    <i class="fas fa-satellite-dish text-6xl"></i>
                </div>
                <a href="index.html"
                    class="inline-block bg-green-500 text-white font-bold text-xl py-4 px-12 rounded-full shadow-lg hover:bg-green-600 transform hover:scale-105 transition-all duration-300">
                    Return to the Home Planet
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 bg-opacity-80 py-10 text-center text-gray-400 text-sm z-10 relative">
        <div class="container mx-auto px-6">
            <p>&copy; <span id="year"></span> CodeFoxSoft. All rights reserved.</p>
            <p class="mt-2">Designed and Developed by Nicholas Larkin Buchanan.</p>
            <a href="https://www.codefoxsoft.com/privacy.html">Privacy Policy</a>

            <div class="flex justify-center space-x-6 mt-4">
            </div>
        </div>
    </footer>

    <!-- Three.js library is required for the galaxy animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // JavaScript for the mobile menu toggle
        document.addEventListener('DOMContentLoaded', () => {
            const menuButton = document.getElementById('menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            if (menuButton && mobileMenu) {
                menuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });

                // Close the menu when a link is clicked
                const mobileLinks = mobileMenu.querySelectorAll('a');
                mobileLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        mobileMenu.classList.add('hidden');
                    });
                });
            }
        });

        // --- Global Variables for Three.js (from the galaxy code) ---
        let scene, camera, renderer, galaxyGroup, backgroundGalaxyGroup, starField;
        let mouseX = 0;
        let mouseY = 0;
        let targetX = 0;
        let targetY = 0;
        let windowHalfX = window.innerWidth / 2;
        let windowHalfY = window.innerHeight / 2;

        // Mobile detection for performance optimization
        const isMobile = window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        // Performance detection variables
        let isLowPerformance = false;
        let performanceTestComplete = false;
        let frameCount = 0;
        let lastPerformanceCheck = 0;
        let animationStartTime = 0;
        const PERFORMANCE_TEST_DURATION = 2000; // Test for 2 seconds

        // Adjust particle counts based on device type - further reduced for mobile performance
        let starCount = isMobile ? 9000 : 75000; // Increased desktop count for denser galaxy
        let backgroundGalaxyCount = isMobile ? 5 : 10; // Increased from 2 to 5 for better visibility
        let starFieldCount = isMobile ? 1000 : 5000;
        const spiralSpeed = 0.0005;

        let softParticleTexture = null;

        // --- Helper Functions for Galaxy Creation (from the galaxy code) ---
        /**
         * Converts HSV color to RGB.
         * H, S, and V are expected to be in the range [0, 1].
         * @param {number} h Hue
         * @param {number} s Saturation
         * @param {number} v Value
         * @returns {Object} RGB object with properties r, g, and b.
         */
        function hsvToRgb(h, s, v) {
            let r, g, b;
            let i = Math.floor(h * 6);
            let f = h * 6 - i;
            let p = v * (1 - s);
            let q = v * (1 - f * s);
            let t = v * (1 - (1 - f) * s);

            switch (i % 6) {
                case 0: r = v, g = t, b = p; break;
                case 1: r = q, g = v, b = p; break;
                case 2: r = p, g = v, b = t; break;
                case 3: r = p, g = q, b = v; break;
                case 4: r = t, g = p, b = v; break;
                case 5: r = v, g = p, b = q; break;
            }
            return { r: r, g: g, b: b };
        }

        /**
         * Creates a single spiral galaxy particle system.
         * @param {number} starCount The number of stars in the galaxy.
         * @param {number} maxRadius The maximum radius of the galaxy.
         * @param {number} armCount The number of spiral arms.
         * @param {number} [opacity=1.0] The opacity of the galaxy.
         * @returns {THREE.Points} The particle system object.
         */
        function createGalaxy(starCount, maxRadius, armCount, opacity = 1.0) {
            const positions = new Float32Array(starCount * 3);
            const colors = new Float32Array(starCount * 3);
            const sizes = new Float32Array(starCount);
            const armOffset = 1.0;

            for (let i = 0; i < starCount; i++) {
                const armIndex = i % armCount;
                const angle = (i / starCount) * Math.PI * 40 + (armIndex * Math.PI * armOffset);

                const distance = Math.pow(Math.random(), 3.0) * maxRadius;

                const crazyFactor = (1 - distance / maxRadius) * 2.0;
                const randomX = (Math.random() - 0.5) * crazyFactor;
                // Vertical spread now increases with distance from the center
                const verticalPuffiness = 0.5 + (distance / maxRadius) * 0.5;
                const randomY = (Math.random() - 0.5) * crazyFactor * verticalPuffiness;
                const randomZ = (Math.random() - 0.5) * crazyFactor;

                const x = Math.cos(angle) * distance + randomX;
                const y = randomY;
                const z = Math.sin(angle) * distance + randomZ;

                positions[i * 3] = x;
                positions[i * 3 + 1] = y;
                positions[i * 3 + 2] = z;

                // Enhanced color logic for brighter, more vibrant rainbow colors
                // Full rainbow spectrum for more colorful galaxy
                const hue = (distance / maxRadius) * 1.0; // Full spectrum (0 to 1.0)
                const saturation = 0.95 + Math.random() * 0.05; // More saturated
                const value = 0.95 + Math.random() * 0.05; // Brighter
                let rgb = hsvToRgb(hue, saturation, value);

                // Keep the center dark
                if (distance < 1.0) {
                    rgb.r = 0;
                    rgb.g = 0;
                    rgb.b = 0;
                }

                colors[i * 3] = rgb.r;
                colors[i * 3 + 1] = rgb.g;
                colors[i * 3 + 2] = rgb.b;

                // Increase size calculation for better visibility
                sizes[i] = isMobile
                    ? (1 - distance / maxRadius) * 0.3 + 0.02  // Much larger for mobile
                    : (1 - distance / maxRadius) * 0.12 + 0.01; // Larger on desktop for denser look
            }

            const geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

            const material = new THREE.PointsMaterial({
                size: isMobile ? 0.15 : 0.025,  // Larger on desktop for denser, more visible galaxy
                map: softParticleTexture,  // Use soft texture for galaxy-like blur effect
                vertexColors: true,
                transparent: true,
                opacity: opacity * 0.95,  // Slightly more opaque for better visibility
                blending: THREE.AdditiveBlending,
                sizeAttenuation: true,
                alphaTest: 0.001  // Helps with transparency rendering
            });

            return new THREE.Points(geometry, material);
        }

        /**
         * Creates a uniform field of distant stars.
         * @param {number} starCount The number of stars.
         * @param {number} maxDistance The maximum distance from the center.
         * @returns {THREE.Points} The particle system object.
         */
        function createStarField(starCount, maxDistance) {
            const positions = new Float32Array(starCount * 3);
            const colors = new Float32Array(starCount * 3);
            const sizes = new Float32Array(starCount);

            for (let i = 0; i < starCount; i++) {
                const x = (Math.random() - 0.5) * maxDistance * 2;
                const y = (Math.random() - 0.5) * maxDistance * 2;
                const z = (Math.random() - 0.5) * maxDistance * 2;

                positions[i * 3] = x;
                positions[i * 3 + 1] = y;
                positions[i * 3 + 2] = z;

                // Set color to white
                colors[i * 3] = 1.0;
                colors[i * 3 + 1] = 1.0;
                colors[i * 3 + 2] = 1.0;

                // Randomize star size - larger on mobile for visibility
                sizes[i] = isMobile ? (Math.random() * 0.3 + 0.25) : (Math.random() * 0.1 + 0.05);
            }

            const geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

            // Make star field material much larger on mobile for visibility
            const starMaterialSize = isMobile ? 0.6 : 0.1;
            const material = new THREE.PointsMaterial({
                size: starMaterialSize,
                vertexColors: true,
                transparent: true,
                opacity: 1.0, // Full opacity for visibility
                blending: THREE.AdditiveBlending, // Use AdditiveBlending for visibility on dark background
                sizeAttenuation: true
            });

            return new THREE.Points(geometry, material);
        }

        /**
         * Initializes the 3D scene, camera, renderer, and particle systems.
         */
        function init() {
            // Create soft particle texture once for reuse
            if (!softParticleTexture) {
                const canvas = document.createElement('canvas');
                canvas.width = 64;
                canvas.height = 64;
                const context = canvas.getContext('2d');

                const gradient = context.createRadialGradient(32, 32, 0, 32, 32, 32);
                gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
                gradient.addColorStop(0.4, 'rgba(255, 255, 255, 0.9)');
                gradient.addColorStop(0.7, 'rgba(255, 255, 255, 0.5)');
                gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');

                context.fillStyle = gradient;
                context.fillRect(0, 0, 64, 64);

                softParticleTexture = new THREE.CanvasTexture(canvas);
                softParticleTexture.needsUpdate = true;
            }

            // --- Scene Setup ---
            scene = new THREE.Scene();
            // Get the canvas container by its ID
            const canvasContainer = document.getElementById('hero-background');
            if (!canvasContainer) {
                console.error('Canvas container element with ID "hero-background" not found.');
                return;
            }

            // Use the container's size to set the camera and renderer
            const width = canvasContainer.clientWidth;
            const height = canvasContainer.clientHeight;

            // Adjust camera FOV for mobile - reduce from 120 to 85 for better performance and visibility
            const cameraFOV = isMobile ? 85 : 120;
            camera = new THREE.PerspectiveCamera(cameraFOV, width / height, 0.1, 8000);
            renderer = new THREE.WebGLRenderer({ antialias: !isMobile, alpha: true }); // Disable antialiasing on mobile for performance
            // Limit pixel ratio on mobile to improve performance - further reduced to 1.0-1.25
            const pixelRatio = isMobile ? Math.min(window.devicePixelRatio, 1.25) : window.devicePixelRatio;
            renderer.setPixelRatio(pixelRatio);
            renderer.setSize(width, height);

            // Append the renderer's DOM element to the div container
            canvasContainer.appendChild(renderer.domElement);

            // Set the camera to a close, angled viewpoint to see the 3D shape
            // Adjust camera position for mobile to better see the galaxy
            if (isMobile) {
                camera.position.z = 10;
                camera.position.y = 3;
                camera.position.x = 0;
            } else {
                camera.position.z = 8;
                camera.position.y = 5;
                camera.position.x = 0;
            }

            // --- Main Galaxy ---
            galaxyGroup = new THREE.Group();
            const mainGalaxy = createGalaxy(starCount, 55, 2, 1.0);
            galaxyGroup.add(mainGalaxy);
            galaxyGroup.rotation.x = 0.5; // Changed to a positive value for "right-side up" view
            scene.add(galaxyGroup);

            // --- Background Galaxies ---
            backgroundGalaxyGroup = new THREE.Group();
            const bgGalaxyStarCount = isMobile ? 5000 : 5000; // Increased to 5000 for maximum visibility
            for (let i = 0; i < backgroundGalaxyCount; i++) {
                // Randomize opacity for each background galaxy - full opacity on mobile for visibility
                const opacity = isMobile ? 1.0 : (0.4 + Math.random() * 0.6);
                const bgGalaxy = createGalaxy(bgGalaxyStarCount, 20, 2, opacity);

                // Randomly position the background galaxies - very close on mobile for visibility
                const bgDistance = isMobile ? (300 + Math.random() * 300) : (5000 + Math.random() * 2000);
                const bgAngle = Math.random() * Math.PI * 2;
                bgGalaxy.position.x = Math.cos(bgAngle) * bgDistance;
                bgGalaxy.position.y = (Math.random() - 0.5) * bgDistance;
                bgGalaxy.position.z = Math.sin(bgAngle) * bgDistance;

                // Randomize rotation
                bgGalaxy.rotation.x = Math.random() * Math.PI * 2;
                bgGalaxy.rotation.y = Math.random() * Math.PI * 2;
                bgGalaxy.rotation.z = Math.random() * Math.PI * 2;

                // Randomize scale - very large on mobile for maximum visibility
                const scale = isMobile ? (1.8 + Math.random() * 0.4) : (0.5 + Math.random() * 0.5);
                bgGalaxy.scale.set(scale, scale, scale);

                backgroundGalaxyGroup.add(bgGalaxy);
            }
            scene.add(backgroundGalaxyGroup);

            // --- Distant Star Field ---
            starField = createStarField(starFieldCount, 1000);
            scene.add(starField);
        }

        // --- Mouse and Resize Listeners (from the galaxy code) ---
        /**
         * Handles window resizing, updating the camera aspect and renderer size.
         */
        function onWindowResize() {
            const canvasContainer = document.getElementById('hero-background');
            if (canvasContainer) {
                windowHalfX = canvasContainer.clientWidth / 2;
                windowHalfY = canvasContainer.clientHeight / 2;
                camera.aspect = canvasContainer.clientWidth / canvasContainer.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(canvasContainer.clientWidth, canvasContainer.clientHeight);
            }
        }

        /**
         * Updates mouse coordinates for galaxy rotation.
         * @param {MouseEvent} event
         */
        function onDocumentMouseMove(event) {
            mouseX = (event.clientX - windowHalfX);
            mouseY = (event.clientY - windowHalfY);
        }

        /**
         * Main animation loop. Updates the scene and renders it.
         */
        // Frame rate limiting for mobile (target 30fps instead of 60fps)
        let lastFrameTime = performance.now();
        const targetFPS = isMobile ? 30 : 60;
        const frameInterval = 1000 / targetFPS;

        function animate(currentTime) {
            requestAnimationFrame(animate);

            // Initialize animation start time on first frame
            if (animationStartTime === 0) {
                animationStartTime = currentTime;
                lastPerformanceCheck = currentTime;
            }

            // Performance testing during first 2 seconds
            const elapsedTime = currentTime - animationStartTime;
            if (!performanceTestComplete && elapsedTime < PERFORMANCE_TEST_DURATION) {
                frameCount++;
                if (currentTime - lastPerformanceCheck >= 1000) { // Check every second
                    const fps = frameCount;
                    // If FPS is below 25 on mobile, consider it low performance
                    if (isMobile && fps < 25) {
                        isLowPerformance = true;
                    }
                    frameCount = 0;
                    lastPerformanceCheck = currentTime;
                }
            } else if (!performanceTestComplete) {
                performanceTestComplete = true;
                // Final check: if average FPS was low, mark as low performance
                const avgFPS = (frameCount / (elapsedTime / 1000));
                if (isMobile && avgFPS < 25) {
                    isLowPerformance = true;
                }
            }

            // Frame rate limiting - only for low performance devices
            if (isMobile && isLowPerformance) {
                const elapsed = currentTime - lastFrameTime;
                if (elapsed < frameInterval) {
                    return; // Skip this frame to maintain target FPS
                }
                lastFrameTime = currentTime - (elapsed % frameInterval);
            } else if (isMobile) {
                lastFrameTime = currentTime; // Track time but don't skip frames
            }

            // Update rotation targets based on mouse position
            // Use full speed on capable devices, reduced on low performance
            const mouseInfluence = (isMobile && isLowPerformance) ? 0.0003 : 0.001;
            targetX = mouseX * mouseInfluence;
            targetY = mouseY * mouseInfluence;

            // Apply mouse influence and continuous rotation to the galaxy group
            // Full speed on capable devices, reduced only on low performance mobile
            const rotationSpeed = (isMobile && isLowPerformance) ? 0.0003 : 0.0005;
            const baseRotation = (isMobile && isLowPerformance) ? 0.0001 : 0.0002;
            galaxyGroup.rotation.y += rotationSpeed * (targetX - galaxyGroup.rotation.y) + baseRotation;
            galaxyGroup.rotation.x += rotationSpeed * (targetY - galaxyGroup.rotation.x) - ((isMobile && isLowPerformance) ? 0.00003 : 0.00005);
            galaxyGroup.rotation.z += (isMobile && isLowPerformance) ? 0.00005 : 0.0001;

            // Pulsing scale effect - always on desktop, also on capable mobile devices
            if (!isMobile) {
                // Desktop always gets pulsing
                const scaleFactor = 1 + Math.sin(Date.now() * 0.0005) * 0.02;
                galaxyGroup.scale.set(scaleFactor, scaleFactor, scaleFactor);
            } else if (!isLowPerformance) {
                // Capable mobile devices get pulsing - slightly faster to match desktop feel
                const scaleFactor = 1 + Math.sin(Date.now() * 0.00065) * 0.02;
                galaxyGroup.scale.set(scaleFactor, scaleFactor, scaleFactor);
            }

            // Camera movement - full on capable devices
            if (isMobile && isLowPerformance) {
                // Less camera movement on low performance mobile
                camera.position.x += (targetX * 0.3 - camera.position.x) * 0.03;
                camera.position.y += (-targetY * 0.3 - camera.position.y) * 0.03;
            } else {
                camera.position.x += (targetX * 0.5 - camera.position.x) * 0.05;
                camera.position.y += (-targetY * 0.5 - camera.position.y) * 0.05;
            }
            camera.lookAt(scene.position);

            // Background galaxies rotation
            const bgRotationSpeed = (isMobile && isLowPerformance) ? 0.000005 : 0.00001;
            backgroundGalaxyGroup.rotation.x += bgRotationSpeed;
            backgroundGalaxyGroup.rotation.y += bgRotationSpeed;

            // Star field rotation - slower on mobile to reduce flashing
            starField.rotation.y += (isMobile && isLowPerformance) ? 0.00001 : (isMobile ? 0.000015 : 0.00005);

            renderer.render(scene, camera);
        }

        // --- Combined window.onload for both scripts ---
        window.onload = function () {
            // Initialize the galaxy scene
            init();
            // Start the animation loop - pass timestamp for frame rate limiting
            animate(performance.now());

            // Intersection Observer for fade-in and slide animations on scroll - optimized for mobile and replay
            const faders = document.querySelectorAll('.fade-in, .slide-left, .slide-right');

            // Mobile-optimized thresholds and margins for earlier triggers
            const isMobileDevice = window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

            // Balanced rootMargin: small positive top margin for early entry, but allows proper exit detection
            // This ensures animations replay when scrolling upward by allowing elements to exit intersection zone
            const appearOptions = {
                threshold: isMobileDevice ? 0.1 : 0.15,
                rootMargin: isMobileDevice ? "50px 0px -50px 0px" : "0px 0px -100px 0px"
            };

            const appearOnScroll = new IntersectionObserver(function (entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    } else {
                        // Remove visible class when element leaves viewport to allow replay
                        entry.target.classList.remove('visible');
                    }
                });
            }, appearOptions);

            faders.forEach(fader => {
                appearOnScroll.observe(fader);
            });

            // Event Listeners from the galaxy code
            window.addEventListener('resize', onWindowResize, false);
            document.addEventListener('mousemove', onDocumentMouseMove, false);
        };
    </script>
    <script>
        document.getElementById('year').textContent = new Date().getFullYear();
    </script>
</body>

</html>